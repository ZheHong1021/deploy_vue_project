"use strict";(self["webpackChunkdeploy_vue_project"]=self["webpackChunkdeploy_vue_project"]||[]).push([[632],{2251:function(t,e,n){n.d(e,{A:function(){return m}});var r=n(1484),i=n(6092),s=n(4414),o=n(6930),a=n(2756),c=n(1034),u=function(){var t=this,e=t._self._c;return e(a.A,[e(s.A,{staticClass:"d-flex flex-wrap",attrs:{cols:"12"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 權限選擇: ")]),e(c.A),e("div",{staticClass:"d-flex align-center gap-4"},[e(r.A,{staticClass:"pa-2 d-flex flex-wrap gap-2",attrs:{outlined:"",color:"#ffcfc4"}},[e(o.A,{attrs:{small:"",color:"red darken-2"}},[t._v("mdi-check-circle")]),e("span",{staticClass:"font-weight-black text-subtitle-2"},[t._v(" 當前選擇 ")])],1),t.group_checked.length>0?e(r.A,{staticClass:"pa-2 d-flex flex-wrap gap-2",attrs:{outlined:"",color:"#c4e1ff"}},[e(o.A,{attrs:{small:"",color:"indigo darken-2"}},[t._v("mdi-check-circle")]),e("span",{staticClass:"font-weight-black text-subtitle-2"},[t._v(" 角色選擇 ")])],1):t._e()],1)],1),e(s.A,{attrs:{cols:"12"}},[e("div",{staticClass:"table-container mt-1"},[e("table",{staticClass:"black--text text-subtitle-2 text-md-subtitle-1",attrs:{id:"table",border:"1"}},[e("thead",{staticClass:"text-subtitle-2 text-md-subtitle-1"},t._l(t.headers,(function(n){return e("th",{key:n["value"]},[t._v(" "+t._s(n["text"])+" ")])})),0),e("tbody",{staticClass:"text-subtitle-2 text-md-subtitle-1",attrs:{align:"center"}},t._l(t.tree_permissions,(function(n,r){return e("tr",{key:r},t._l(t.headers,(function(s){return e("td",{key:s["value"],class:{is_checked:t.is_checked_column(n[s["value"]]?.id),is_group_checked:t.is_group_checked(n[s["value"]]?.id)}},["content_type_name"===s.value?[t._v(" "+t._s(r)+" ")]:[e("div",{staticClass:"d-flex flex-wrap justify-center align-center"},[e(i.A,{attrs:{value:n[s.value]["id"],label:n[s.value]["name"],readonly:t.readonly||t.is_group_checked(n[s.value]["id"]),disabled:t.readonly||t.is_group_checked(n[s.value]["id"])},on:{change:t.emitEvent},model:{value:t.permission_checked,callback:function(e){t.permission_checked=e},expression:"permission_checked"}})],1)]],2)})),0)})),0)])])])],1)},f=[],l=(n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197),n(4603),n(7566),n(8721),n(8521)),d={name:"PermissionCheckedList",props:{value:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1},group_checked:{type:Array,default:()=>[]}},data(){return{loading:!0,permissions:[],tree_permissions:{},permission_checked:[],headers:[{text:"權限對象",value:"content_type_name"},{text:"查看",value:"查看"},{text:"新增",value:"新增"},{text:"修改",value:"修改"},{text:"刪除",value:"刪除"}]}},watch:{value:{immediate:!0,handler(t){this.permission_checked=this.value}},group_checked:{immediate:!0,handler(t){this.permission_checked=[...new Set([...this.value,...t])]}}},async mounted(){await this.fetchPermission()},methods:{async fetchPermission(){try{const t=new URLSearchParams({page_size:-1}),e=await l.n1.get_all(t);if(200===e.status){const{data:t,count:n}=e.data;this.permissions=t,await this.getTreePermission()}}catch(t){console.log(t)}finally{this.loading=!1}},emitEvent(t){const{permission_checked:e}=this;e.includes(t)?this.$emit("input",e.filter((e=>e!==t))):t&&this.$emit("input",this.permission_checked)},getTreePermission(){const t={};for(const e of this.permissions){const{content_type_name:n,action:r}=e;t[n]||(t[n]={}),t[n][r]||(t[n][r]={}),t[n][r]=e}this.tree_permissions=t},is_checked_column(t){return this.value.includes(t)},is_group_checked(t){return this.group_checked.includes(t)}}},h=d,p=n(1656),v=(0,p.A)(h,u,f,!1,null,"a7356c8a",null),m=v.exports},7080:function(t,e,n){var r=n(4402).has;t.exports=function(t){return r(t),t}},6706:function(t,e,n){var r=n(9504),i=n(9306);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(s){}}},1767:function(t){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},3789:function(t,e,n){var r=n(9306),i=n(8551),s=n(9565),o=n(1291),a=n(1767),c="Invalid size",u=RangeError,f=TypeError,l=Math.max,d=function(t,e){this.set=t,this.size=l(e,0),this.has=r(t.has),this.keys=r(t.keys)};d.prototype={getIterator:function(){return a(i(s(this.keys,this.set)))},includes:function(t){return s(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!==e)throw new f(c);var n=o(e);if(n<0)throw new u(c);return new d(t,n)}},507:function(t,e,n){var r=n(9565);t.exports=function(t,e,n){var i,s,o=n?t:t.iterator,a=t.next;while(!(i=r(a,o)).done)if(s=e(i.value),void 0!==s)return s}},9539:function(t,e,n){var r=n(9565),i=n(8551),s=n(5966);t.exports=function(t,e,n){var o,a;i(t);try{if(o=s(t,"return"),!o){if("throw"===e)throw n;return n}o=r(o,t)}catch(c){a=!0,o=c}if("throw"===e)throw n;if(a)throw o;return i(o),n}},9286:function(t,e,n){var r=n(4402),i=n(8469),s=r.Set,o=r.add;t.exports=function(t){var e=new s;return i(t,(function(t){o(e,t)})),e}},3440:function(t,e,n){var r=n(7080),i=n(4402),s=n(9286),o=n(5170),a=n(3789),c=n(8469),u=n(507),f=i.has,l=i.remove;t.exports=function(t){var e=r(this),n=a(t),i=s(e);return o(e)<=n.size?c(e,(function(t){n.includes(t)&&l(i,t)})):u(n.getIterator(),(function(t){f(e,t)&&l(i,t)})),i}},4402:function(t,e,n){var r=n(9504),i=Set.prototype;t.exports={Set:Set,add:r(i.add),has:r(i.has),remove:r(i["delete"]),proto:i}},8750:function(t,e,n){var r=n(7080),i=n(4402),s=n(5170),o=n(3789),a=n(8469),c=n(507),u=i.Set,f=i.add,l=i.has;t.exports=function(t){var e=r(this),n=o(t),i=new u;return s(e)>n.size?c(n.getIterator(),(function(t){l(e,t)&&f(i,t)})):a(e,(function(t){n.includes(t)&&f(i,t)})),i}},4449:function(t,e,n){var r=n(7080),i=n(4402).has,s=n(5170),o=n(3789),a=n(8469),c=n(507),u=n(9539);t.exports=function(t){var e=r(this),n=o(t);if(s(e)<=n.size)return!1!==a(e,(function(t){if(n.includes(t))return!1}),!0);var f=n.getIterator();return!1!==c(f,(function(t){if(i(e,t))return u(f,"normal",!1)}))}},3838:function(t,e,n){var r=n(7080),i=n(5170),s=n(8469),o=n(3789);t.exports=function(t){var e=r(this),n=o(t);return!(i(e)>n.size)&&!1!==s(e,(function(t){if(!n.includes(t))return!1}),!0)}},8527:function(t,e,n){var r=n(7080),i=n(4402).has,s=n(5170),o=n(3789),a=n(507),c=n(9539);t.exports=function(t){var e=r(this),n=o(t);if(s(e)<n.size)return!1;var u=n.getIterator();return!1!==a(u,(function(t){if(!i(e,t))return c(u,"normal",!1)}))}},8469:function(t,e,n){var r=n(9504),i=n(507),s=n(4402),o=s.Set,a=s.proto,c=r(a.forEach),u=r(a.keys),f=u(new o).next;t.exports=function(t,e,n){return n?i({iterator:u(t),next:f},e):c(t,e)}},4916:function(t,e,n){var r=n(7751),i=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var e=r("Set");try{(new e)[t](i(0));try{return(new e)[t](i(-1)),!1}catch(n){return!0}}catch(s){return!1}}},5170:function(t,e,n){var r=n(6706),i=n(4402);t.exports=r(i.proto,"size","get")||function(t){return t.size}},3650:function(t,e,n){var r=n(7080),i=n(4402),s=n(9286),o=n(3789),a=n(507),c=i.add,u=i.has,f=i.remove;t.exports=function(t){var e=r(this),n=o(t).getIterator(),i=s(e);return a(n,(function(t){u(e,t)?f(i,t):c(i,t)})),i}},4204:function(t,e,n){var r=n(7080),i=n(4402).add,s=n(9286),o=n(3789),a=n(507);t.exports=function(t){var e=r(this),n=o(t).getIterator(),c=s(e);return a(n,(function(t){i(c,t)})),c}},7642:function(t,e,n){var r=n(6518),i=n(3440),s=n(4916);r({target:"Set",proto:!0,real:!0,forced:!s("difference")},{difference:i})},8004:function(t,e,n){var r=n(6518),i=n(9039),s=n(8750),o=n(4916),a=!o("intersection")||i((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));r({target:"Set",proto:!0,real:!0,forced:a},{intersection:s})},3853:function(t,e,n){var r=n(6518),i=n(4449),s=n(4916);r({target:"Set",proto:!0,real:!0,forced:!s("isDisjointFrom")},{isDisjointFrom:i})},5876:function(t,e,n){var r=n(6518),i=n(3838),s=n(4916);r({target:"Set",proto:!0,real:!0,forced:!s("isSubsetOf")},{isSubsetOf:i})},2475:function(t,e,n){var r=n(6518),i=n(8527),s=n(4916);r({target:"Set",proto:!0,real:!0,forced:!s("isSupersetOf")},{isSupersetOf:i})},5024:function(t,e,n){var r=n(6518),i=n(3650),s=n(4916);r({target:"Set",proto:!0,real:!0,forced:!s("symmetricDifference")},{symmetricDifference:i})},1698:function(t,e,n){var r=n(6518),i=n(4204),s=n(4916);r({target:"Set",proto:!0,real:!0,forced:!s("union")},{union:i})},3375:function(t,e,n){n(7642)},9225:function(t,e,n){n(8004)},3972:function(t,e,n){n(3853)},9209:function(t,e,n){n(5876)},5714:function(t,e,n){n(2475)},7561:function(t,e,n){n(5024)},6197:function(t,e,n){n(1698)}}]);
//# sourceMappingURL=632.29241b5e.js.map