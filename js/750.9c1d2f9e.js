"use strict";(self["webpackChunkdeploy_vue_project"]=self["webpackChunkdeploy_vue_project"]||[]).push([[750],{6194:function(t,e,a){a.d(e,{A:function(){return u}});var l=a(3180),o=a(6930),s=function(){var t=this,e=t._self._c;return e(l.A,{staticClass:"elevation-2 font-weight-bold black--text",attrs:{label:"",color:t.status_style["color"]}},[e(o.A,{attrs:{small:"",left:"",color:t.status_style["icon_color"]}},[t._v("circle")]),t._v(" "+t._s(t.product["status_display"])+" ")],1)},i=[],r={name:"ProductStatus",props:{product:{type:Object,default:()=>{}}},data(){return{status_style_map:{available:{color:"primary lighten-5",icon_color:"primary"},out_of_stock:{color:"error lighten-5",icon_color:"error"},discontinued:{color:"grey lighten-2",icon_color:"grey darken-2"}}}},computed:{status_style(){const{status:t}=this.product;return this.status_style_map[t]}}},n=r,c=a(1656),d=(0,c.A)(n,s,i,!1,null,"3e642e7a",null),u=d.exports},4322:function(t,e,a){a.d(e,{A:function(){return d}});var l=a(4312),o=function(){var t=this,e=t._self._c;return e(l.A,{attrs:{value:t.value,items:t.items,loading:t.loading,"loader-height":"4",label:t.label,"item-text":t.itemText,"item-value":t.itemValue,outlined:"",rules:t.rules,"no-data-text":"無任何可選擇資料",placeholder:t.placeholder,"menu-props":{bottom:!0,offsetY:!0}},on:{change:function(e){return t.$emit("input",e)}}})},s=[],i={name:"CustomSelect",props:{value:{type:[String,Number,Object],default:null},label:{type:String,default:"請選擇內容"},items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!0},rules:{type:Array,default:()=>[]},placeholder:{type:String,default:"請選擇以下內容"},itemText:{type:String,default:"text"},itemValue:{type:String,default:"value"}}},r=i,n=a(1656),c=(0,n.A)(r,o,s,!1,null,null,null),d=c.exports},4074:function(t,e,a){a.d(e,{A:function(){return h}});var l=a(7112),o=a(5803);const s=(0,o.A)(l.A);var i=s.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...l.A.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"},genInput(){const t=l.A.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){l.A.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),r=function(){var t=this,e=t._self._c;return e(i,{attrs:{outlined:"",label:t.label,rows:t.rows,"row-height":t.rowHeight,clearable:t.clearable,"clear-icon":"mdi-close-circle","no-resize":"",placeholder:t.placeholder,value:t.value,readonly:t.readonly},on:{input:function(e){return t.$emit("input",e)}}})},n=[],c={name:"CustomTextArea",props:{value:{type:[String],default:null},label:{type:String,default:"請填寫內容"},placeholder:{type:String,default:"請開始填寫您想輸入的內容"},rules:{type:Array,default:()=>[]},rows:{type:Number,default:4},rowHeight:{type:Number,default:30},shaped:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}}},d=c,u=a(1656),p=(0,u.A)(d,r,n,!1,null,null,null),h=p.exports},5750:function(t,e,a){a.r(e),a.d(e,{default:function(){return N}});var l=a(4414),o=a(3449),s=a(2756),i=function(){var t=this,e=t._self._c;return e(o.A,{attrs:{fluid:""}},[e(s.A,[e(l.A,{attrs:{cols:"12"}},[e("CustomDataTable",{attrs:{items:t.items,itemsLength:t.itemsLength,options:t.options,headers:t.headers,height:"100%",loading:t.loading,disabled_select:t.disabled_select,"fixed-header":!1,"show-expand":""},on:{emitUpdateOptions:t.emitUpdateOptions,create:t.emitCreate,read:t.emitRead,update:t.emitUpdate,delete:t.emitDelete}})],1)],1),e("CustomDialog",{attrs:{title:"新增產品分類",color:"pink darken-2"},scopedSlots:t._u([{key:"body",fn:function(){return[t.create_dialog?e("CreateProductCategoryForm",{on:{refresh:t.refreshData}}):t._e()]},proxy:!0}]),model:{value:t.create_dialog,callback:function(e){t.create_dialog=e},expression:"create_dialog"}}),e("CustomDialog",{attrs:{title:"瀏覽產品分類",color:"grey darken-2"},scopedSlots:t._u([{key:"body",fn:function(){return[t.read_dialog?e("ReadProductCategoryForm",{attrs:{id:t.read_id}}):t._e()]},proxy:!0}]),model:{value:t.read_dialog,callback:function(e){t.read_dialog=e},expression:"read_dialog"}}),e("CustomDialog",{attrs:{title:"修改產品分類",color:"primary darken-2"},scopedSlots:t._u([{key:"body",fn:function(){return[t.update_dialog?e("UpdateProductCategoryForm",{attrs:{id:t.update_id},on:{refresh:t.refreshData}}):t._e()]},proxy:!0}]),model:{value:t.update_dialog,callback:function(e){t.update_dialog=e},expression:"update_dialog"}})],1)},r=[],n=a(132),c=a(6989),d=a(4846),u=a(4460),p=a(3740),h=a(174),m=a(7112),f=function(){var t=this,e=t._self._c;return e(h.A,{ref:"form",on:{submit:function(e){return e.preventDefault(),t.create.apply(null,arguments)}},model:{value:t.createFormValid,callback:function(e){t.createFormValid=e},expression:"createFormValid"}},[e(s.A,{staticClass:"justify-start"},[e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 分類名稱: "),e("strong",{staticClass:"red--text font-weight-bold text-caption text-left text-sm-right"},[t._v(" (*必填) ")])]),e(m.A,{attrs:{"background-color":"white",outlined:"",label:"分類名稱",rules:[t.rules["requiredRules"],t.rules.minLengthRules(2),t.rules.maxLengthRules(12)],placeholder:"填寫範例: 廚房用具"},model:{value:t.create_data["name"],callback:function(e){t.$set(t.create_data,"name",e)},expression:"create_data['name']"}})],1),e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 代表色碼: "),e("strong",{staticClass:"blue--text font-weight-bold text-caption text-left text-sm-right"},[t._v(" (*非必填) ")])]),e(m.A,{attrs:{"background-color":"white",outlined:"",label:"請填寫代表色碼",placeholder:"填寫範例: #FF0000","prepend-inner-icon":"mdi-palette"},model:{value:t.create_data["color"],callback:function(e){t.$set(t.create_data,"color",t._n(e))},expression:"create_data['color']"}})],1),e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"6",xl:"6"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 分類描述: "),e("strong",{staticClass:"blue--text font-weight-bold text-caption text-left text-sm-right"},[t._v(" (*非必填) ")])]),e("CustomTextArea",{attrs:{label:"請填寫分類描述",clearable:""},model:{value:t.create_data["description"],callback:function(e){t.$set(t.create_data,"description",e)},expression:"create_data['description']"}})],1),e(l.A,{staticClass:"d-flex align-center justify-center gap-4",attrs:{cols:"12"}},[e(p.A,{staticClass:"font-weight-bold white--text",attrs:{color:"primary darken-2",type:"submit",width:"150",height:"50"}},[t._v(" 儲存 ")])],1)],1)],1)},g=[],_=a(4322),x=a(4074),b={name:"UpdateProductCategoryForm",components:{CustomSelect:_.A,CustomTextArea:x.A},props:{id:{type:String,default:null}},data(){return{origin_data:{},loading:!0,create_data:{name:null,description:null,color:null},createFormValid:!1,rules:c.aO}},computed:{},async mounted(){},methods:{async create(){if(this.$refs.form.validate(),!this.createFormValid)return void this.$swal.fire("請確實填寫內容","","error");const t=await this.$swal.fire({title:"提交提醒",text:"正在提交表單進行儲存",icon:"info",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"儲存"});if(t.isConfirmed)try{const t=new FormData;for(const[a,l]of Object.entries(this.create_data))null!==l&&void 0!==l&&t.append(a,l);const e=await n.Fz.create(t);201===e.status?(this.$swal.fire("儲存成功","","success"),this.$emit("refresh")):this.$swal.fire("儲存失敗","","error")}catch(e){console.error(e)}}}},y=b,v=a(1656),w=(0,v.A)(y,f,g,!1,null,"17982010",null),C=w.exports,A=function(){var t=this,e=t._self._c;return e(s.A,{staticClass:"justify-start"},[e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 分類名稱: ")]),e(m.A,{attrs:{"background-color":"white",outlined:"",readonly:""},model:{value:t.origin_data["name"],callback:function(e){t.$set(t.origin_data,"name",e)},expression:"origin_data['name']"}})],1),e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 代表色碼: ")]),e(m.A,{attrs:{value:t.origin_data["color"],"background-color":"white",outlined:"",readonly:"","prepend-inner-icon":"mdi-palette"}})],1),e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"6",xl:"6"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 分類描述: ")]),e("CustomTextArea",{attrs:{label:"請填寫分類描述",readonly:""},model:{value:t.origin_data["description"],callback:function(e){t.$set(t.origin_data,"description",e)},expression:"origin_data['description']"}})],1)],1)},k=[],F={name:"ReadProductCategoryForm",components:{CustomTextArea:x.A},props:{id:{type:String,default:null}},data(){return{origin_data:{},loading:!0}},computed:{},async mounted(){await this.fetchData()},methods:{async fetchData(){try{const t=await n.Fz.get_by_id(this.id);if(200===t.status){const e=t.data;this.origin_data=e}}catch(t){console.error(t)}finally{this.loading=!1}}}},$=F,D=(0,v.A)($,A,k,!1,null,"3700bd2f",null),S=D.exports,T=function(){var t=this,e=t._self._c;return e(h.A,{ref:"form",on:{submit:function(e){return e.preventDefault(),t.update.apply(null,arguments)}},model:{value:t.updateFormValid,callback:function(e){t.updateFormValid=e},expression:"updateFormValid"}},[e(s.A,{staticClass:"justify-start"},[e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 分類名稱: "),e("strong",{staticClass:"red--text font-weight-bold text-caption text-left text-sm-right"},[t._v(" (*必填) ")])]),e(m.A,{attrs:{"background-color":"white",outlined:"",label:"分類名稱",rules:[t.rules["requiredRules"],t.rules.minLengthRules(2),t.rules.maxLengthRules(12)],placeholder:"填寫範例: 廚房用具"},model:{value:t.update_data["name"],callback:function(e){t.$set(t.update_data,"name",e)},expression:"update_data['name']"}})],1),e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"4",xl:"3"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 代表色碼: "),e("strong",{staticClass:"blue--text font-weight-bold text-caption text-left text-sm-right"},[t._v(" (*非必填) ")])]),e(m.A,{attrs:{"background-color":"white",outlined:"",label:"請填寫代表色碼",placeholder:"填寫範例: #FF0000","prepend-inner-icon":"mdi-palette"},model:{value:t.update_data["color"],callback:function(e){t.$set(t.update_data,"color",t._n(e))},expression:"update_data['color']"}})],1),e(l.A,{staticClass:"d-flex flex-column gap-2",attrs:{cols:"12",md:"6",lg:"6",xl:"6"}},[e("div",{staticClass:"label-container font-weight-bold text-subtitle-1"},[t._v(" 分類描述: "),e("strong",{staticClass:"blue--text font-weight-bold text-caption text-left text-sm-right"},[t._v(" (*非必填) ")])]),e("CustomTextArea",{attrs:{label:"請填寫分類描述",clearable:""},model:{value:t.update_data["description"],callback:function(e){t.$set(t.update_data,"description",e)},expression:"update_data['description']"}})],1),e(l.A,{staticClass:"d-flex align-center justify-center gap-4",attrs:{cols:"12"}},[e(p.A,{staticClass:"font-weight-bold white--text",attrs:{color:"primary darken-2",type:"submit",width:"150",height:"50"}},[t._v(" 儲存 ")])],1)],1)],1)},H=[],P={name:"UpdateProductCategoryForm",components:{CustomSelect:_.A,CustomTextArea:x.A},props:{id:{type:String,default:null}},data(){return{origin_data:{},loading:!0,update_data:{name:null,description:null,color:null},updateFormValid:!1,rules:c.aO}},computed:{},async mounted(){await this.fetchData()},methods:{async fetchData(){try{const t=await n.Fz.get_by_id(this.id);if(200===t.status){const e=t.data;this.origin_data=e,this.update_data={name:e["name"],description:e["description"],color:e["color"]}}}catch(t){console.error(t)}finally{this.loading=!1}},async update(){if(this.$refs.form.validate(),!this.updateFormValid)return void this.$swal.fire("請確實填寫內容","","error");const t=await this.$swal.fire({title:"提交提醒",text:"正在提交表單進行儲存",icon:"info",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"儲存"});if(t.isConfirmed)try{const t=new FormData;for(const[a,l]of Object.entries(this.update_data))null!==l&&void 0!==l&&t.append(a,l);const e=await n.Fz.update(this.id,t);200===e.status?(this.$swal.fire("儲存成功","","success"),this.$emit("refresh")):this.$swal.fire("儲存失敗","","error")}catch(e){console.error(e)}}}},R=P,V=(0,v.A)(R,T,H,!1,null,"4725602a",null),z=V.exports,B=a(6194),I={components:{CustomDataTable:d.A,CustomDialog:u.A,ProductStatus:B.A,CreateProductCategoryForm:C,ReadProductCategoryForm:S,UpdateProductCategoryForm:z},data(){return{dialog:!1,loading:!0,items:[],itemsLength:0,disabled_select:["name"],options:{page:1,itemsPerPage:30,sortBy:["created_at"],sortDesc:[!0]},headers:[{text:"種類名稱",value:"name",sortable:!0},{text:"操作",value:"actions",sortable:!0},{text:"描述",value:"description",sortable:!0},{text:"顏色",value:"color",sortable:!0},{text:"建立時間",value:"created_at",sortable:!0}],create_dialog:!1,read_dialog:!1,update_dialog:!1,read_id:null,update_id:null}},computed:{},async mounted(){await this.fetchData()},methods:{async fetchData(){this.loading=!0;try{const t=(0,c.UH)(this.options),e=await n.Fz.get_all(t);if(200===e.status){const{data:t,count:a}=e.data;this.items=t,this.itemsLength=a}}catch(t){console.error(t)}finally{this.loading=!1}},emitUpdateOptions(t){this.options=t,this.fetchData()},async refreshData(){await this.fetchData(),this.create_dialog=!1,this.update_dialog=!1},emitCreate(){this.create_dialog=!0},emitRead(t){this.read_id=t,this.read_dialog=!0},emitUpdate(t){this.update_id=t,this.update_dialog=!0},async emitDelete(t){const e=await(0,c.d4)();if(e.isConfirmed){const e=await(0,c.JV)();if(e)try{const e=await n.Fz.delete(t);204===e.status&&(this.$swal.fire("刪除成功","","success"),await this.fetchData())}catch(a){console.log(a)}}}}},j=I,U=(0,v.A)(j,i,r,!1,null,"334892a4",null),N=U.exports}}]);
//# sourceMappingURL=750.9c1d2f9e.js.map