(function(){var e={1099:function(e,t,n){"use strict";n.d(t,{$1:function(){return p},QE:function(){return m},sO:function(){return A}});var o=n(1250),r=n(7059),s=n(5537);const a=o.A.create({baseURL:{NODE_ENV:"production",VUE_APP_TITLE:"測試功能",VUE_APP_API:"http://127.0.0.1:8000",VUE_APP_ProductionTip:"true",VUE_APP_DevTools:"false",BASE_URL:"/deploy_vue_project/"}.VUE_APP_API_URL||"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});function i(e){try{const t=(0,s.s)(e),n=Date.now()/1e3;return t.exp<n}catch(t){return!0}}a.interceptors.request.use((async e=>{let t=localStorage.getItem("accessToken")||null;return t&&(i(t)&&(await r.A.dispatch("auth/verifyAccessToken"),t=localStorage.getItem("accessToken")),e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),a.interceptors.response.use((e=>e),(e=>Promise.reject(e)));var c=a;class u{constructor(e){this.resource=e}getAll(e){return c.get(`/${this.resource}/`,{params:e})}getById(e,t){return c.get(`/${this.resource}/${e}/`,{params:t})}create(e){return c.post(`/${this.resource}/`,e)}update(e,t){return c.put(`/${this.resource}/${e}/`,t)}delete(e){return c.delete(`/${this.resource}/${e}/`)}}var l=u;class d extends l{constructor(){super("orders")}}var m=new d;class f extends l{constructor(){super("menus")}}var p=new f;const h=o.A.create({baseURL:{NODE_ENV:"production",VUE_APP_TITLE:"測試功能",VUE_APP_API:"http://127.0.0.1:8000",VUE_APP_ProductionTip:"true",VUE_APP_DevTools:"false",BASE_URL:"/deploy_vue_project/"}.VUE_APP_API_URL||"/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),g=e=>h.post("token/",e),v=e=>h.post("token/verify/",{token:e}),_=e=>h.post("token/refresh/",{refresh:e});var A={login:g,verify_token:v,refresh_token:_}},4232:function(e,t,n){"use strict";var o=n(5471),r=n(5668),s=function(){var e=this,t=e._self._c;return t(r.A,[t("Sidebar",{attrs:{drawer:e.drawer},on:{toggleNavigation:e.toggleNavigation}}),t("Appbar",{on:{toggleDrawer:function(t){e.drawer=!e.drawer}}}),t("Main"),t("goTopButton"),t("Footer")],1)},a=[],i=n(301),c=n(2696),u=n(2367),l=function(){var e=this,t=e._self._c;return t(i.A,{attrs:{app:"",color:e.darkMode?"#333":"white"}},[t(c.A,{on:{click:function(t){return e.$emit("toggleDrawer")}}}),t(u.sw,{staticClass:"logo-title font-weight-bold d-flex align-center"},[t("img",{staticClass:"mr-2",attrs:{width:"35",height:"35",src:n(3914),alt:""}}),e._v(" "+e._s(e.title)+" ")])],1)},d=[],m={name:"Appbar",data(){return{title:"測試功能",darkMode:!1}},mounted(){},computed:{},methods:{}},f=m,p=n(1656),h=(0,p.A)(f,l,d,!1,null,null,null),g=h.exports,v=n(3180),_=n(9483),A=n(6930),y=n(5420),w=n(8983),b=n(7296),k=n(2239),T=n(579),C=n(9136),x=n(7982),P=function(){var e=this,t=e._self._c;return t(x.A,{attrs:{app:"",touchless:"",color:"white",temporary:e.is_mobile},on:{input:e.toggleNavigation},model:{value:e.drawerState,callback:function(t){e.drawerState=t},expression:"drawerState"}},[t("div",{staticClass:"d-flex flex-column justify-space-between fill-height"},[t("div",{staticClass:"sidebar-header"},[t(w.A,{staticClass:"header"},[t(b.A,[t(k.A,[t(y.A,{attrs:{src:n(3914)}})],1),t(T.pr,[t(T.UZ,{staticClass:"font-weight-medium d-flex flex-wrap align-center",staticStyle:{gap:"0.25rem"}},[t("h6",{staticClass:"font-weight-black text-subtitle-1 text-lg-h6"},[e._v(" 使用者 ")])]),t(T.w,{staticClass:"d-flex flex-wrap gap-2"},[t(v.A,{staticClass:"white--text",attrs:{small:"",color:"info"}},[e._v(" 角色 ")])],1)],1)],1)],1),t(_.A,{staticClass:"mx-auto my-2",attrs:{width:"80%"}}),t("MenuItem",{attrs:{menus:e.menus}})],1),t("div",{staticClass:"sidebar-header"},[t(_.A,{attrs:{color:"white"}}),e._l(e.footer_menus,(function(n){return[n["ifShow"]?t(w.A,{key:n["title"],staticClass:"sidebar-footer",attrs:{nav:"",shaped:""}},[t(b.A,{staticClass:"menu v-list-item",attrs:{path:""},on:{click:n["click"]}},[t(C.A,[t(A.A,{staticClass:"menu-icon"},[e._v(" "+e._s(n["icon"])+" ")])],1),t(T.UZ,{staticClass:"menu-text"},[e._v(" "+e._s(n["title"])+" ")])],1)],1):e._e()]}))],2)])])},S=[],E=(n(4114),n(609)),L=function(){var e=this,t=e._self._c;return t(w.A,{staticClass:"my-0 py-0",attrs:{nav:""}},e._l(e.menus,(function(n){return t("div",{key:n["name"],staticClass:"py-0 my-0"},[e.has_children_menu(n)?t(E.A,{key:n["name"],staticClass:"my-2",attrs:{"no-action":"","prepend-icon":n["icon"],value:e.isGroupActive(n)},scopedSlots:e._u([{key:"activator",fn:function(){return[t(b.A,{staticClass:"menu v-list-item menu-group px-0",class:{"pl-8":e.depth>0}},[t(T.pr,[t(T.UZ,{staticClass:"menu-text",style:`font-size: ${e.depthFontSize};`},[e._v(" "+e._s(n["title"])+" ")])],1)],1)]},proxy:!0}],null,!0)},[e.has_children_menu(n)?t("menu-item",{attrs:{menus:n["children"],depth:e.depth+1}}):e._e()],1):t(b.A,{staticClass:"menu v-list-item my-1",class:{"d-flex flex-row-reverse pl-10":e.depth>0},attrs:{link:"",dense:e.depth>0,to:{name:n["name"]},"active-class":"active-menu"}},[0!==e.depth&&n["children"]?e._e():t(C.A,[t(A.A,{staticClass:"menu-icon"},[e._v(" "+e._s(n["icon"])+" ")])],1),t(T.UZ,{staticClass:"menu-text",style:`font-size: ${e.depthFontSize};`},[e._v(" "+e._s(n["title"])+" ")])],1)],1)})),0)},O=[],N={name:"MenuItem",props:{menus:{type:Array,default:()=>[]},depth:{type:Number,default:0}},data:()=>({}),mounted(){},computed:{depthFontSize(){const{depth:e}=this,t={0:"1rem",1:"0.8rem",2:"0.8rem"};return t[e]}},methods:{isGroupActive(e){return e["children"].some((e=>this.$route.path.startsWith(e["path"])||e["children"]&&this.isGroupActive(e)))},has_children_menu(e){return e["children"]&&e["children"].length>0}}},j=N,I=(0,p.A)(j,L,O,!1,null,"1b4b6c42",null),U=I.exports,$=(n(1099),n(5353)),M={name:"Sidebar",components:{MenuItem:U},props:{drawer:{type:Boolean,default:!1}},data:()=>({drawerState:null}),mounted(){},computed:{...(0,$.L8)("auth",["isLoggedIn"]),...(0,$.aH)("menu",["menus"]),footer_menus(){return[{title:"登出",icon:"mdi-logout",ifShow:this.isLoggedIn,click:this.logout},{title:"登入",icon:"mdi-login-variant",ifShow:!this.isLoggedIn,click:this.login}]}},watch:{drawer:{handler(e){this.drawerState=e}}},methods:{toggleNavigation(e){this.$emit("toggleNavigation",e)},async logout(){this.$store.dispatch("auth/logout")},login(){this.$router.push({name:"Login"})}}},B=M,D=(0,p.A)(B,P,S,!1,null,"7bf84047",null),F=D.exports,V=n(5322),R=function(){var e=this,t=e._self._c;return t(V.A,{staticClass:"main-container"},[t("keep-alive",[e.$route.meta.keepAlive?t("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():t("router-view")],1)},H=[],z={name:"Main"},Q=z,q=(0,p.A)(Q,R,H,!1,null,"1924168a",null),J=q.exports,Z=n(4414),G=n(8143),K=n(2756),W=function(){var e=this,t=e._self._c;return t(G.A,{attrs:{color:"primary lighten-1",padless:""}},[t(K.A,{attrs:{justify:"center","no-gutters":""}},[t(Z.A,{staticClass:"blue lighten-5 py-4 text-center",attrs:{cols:"12"}},[t("strong",[e._v("© "+e._s((new Date).getFullYear())+" — 開發")])])],1)],1)},Y=[],X={name:"Footer",data:()=>({}),computed:{}},ee=X,te=(0,p.A)(ee,W,Y,!1,null,"00d42743",null),ne=te.exports,oe=n(7314),re=n(2080),se=function(){var e=this,t=e._self._c;return t(re.A,{attrs:{top:"",color:e.tooltip_color,disabled:e.is_mobile},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(oe.A,e._g(e._b({staticClass:"go-top-button",class:{"show-go-top-button":e.isTop},attrs:{fab:"",color:e.btn_color},on:{click:e.scrollToTop}},"v-btn",o,!1),n),[t(A.A,{attrs:{color:"white"}},[e._v(" "+e._s(e.icon)+" ")])],1)]}}])},[t("span",[e._v(e._s(e.tooltip_text))])])},ae=[],ie={name:"goTopButton",data(){return{scrollNum:0,isTop:!1,trigger_top:200,btn_color:"#57606f",icon:"mdi-arrow-up",tooltip_color:"blue-grey darken-4",tooltip_text:"回頂部"}},async mounted(){window.addEventListener("scroll",this.ListenDisplayTopButton)},methods:{ListenDisplayTopButton(){let e=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;this.scrollNum=e,this.isTop=e>=this.trigger_top},scrollToTop(){this.$scrollTo({el:"#app",offset:-65})}}},ce=ie,ue=(0,p.A)(ce,se,ae,!1,null,null,null),le=ue.exports,de={name:"App",components:{Appbar:g,Sidebar:F,Main:J,Footer:ne,goTopButton:le},data(){return{drawer:!1}},computed:{...(0,$.L8)("auth",["isLoggedIn"])},async mounted(){},methods:{toggleNavigation(e){this.drawer=e}}},me=de,fe=(0,p.A)(me,s,a,!1,null,null,null),pe=fe.exports,he=n(8197),ge=n(7059),ve=n(5868);o.Ay.use(ve.A);var _e=new ve.A({});const Ae={data(){return{}},mounted(){},computed:{rwd_name(){return this.$vuetify.breakpoint.name},is_mobile(){return"xs"===this.rwd_name},is_tablet(){return"sm"===this.rwd_name}},methods:{}};var ye=n(8640);o.Ay.config.productionTip="true",o.Ay.config.devtools="false",o.Ay.mixin(Ae);const we=n(6283);async function be(){const e=ge.A.getters["auth/isLoggedIn"];e&&await ge.A.dispatch("menu/getMenus"),new o.Ay({router:he.A,store:ge.A,vuetify:_e,render:e=>e(pe)}).$mount("#app")}o.Ay.use(we),o.Ay.use(ye.A),be()},8197:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var o=n(5471),r=n(173),s=n(4279);o.Ay.use(r.Ay);const a=[{path:"/",redirect:e=>({name:"Home"}),meta:{is_menu:!1}},{path:"/f",name:"Home",component:(0,s.QJ)("Home"),meta:{is_menu:!0,title:"首頁",icon:"mdi-home"}},{path:"/login",name:"Login",component:(0,s.QJ)("Auth/Login"),meta:{is_menu:!1}},{path:"*",name:"PageNotFound",component:(0,s.QJ)("PageNotFound"),meta:{is_menu:!1}}],i=r.Ay.prototype.push;r.Ay.prototype.push=function(e){return i.call(this,e).catch((e=>e))};const c=()=>new r.Ay({mode:"history",base:"/deploy_vue_project/",routes:a}),u=c();function l(){const e=c();u.matcher=e.matcher}u.beforeEach(((e,t,n)=>{(0,s.wr)(e)&&n({name:"Login"}),n()})),t.A=u},4279:function(e,t,n){"use strict";n.d(t,{QJ:function(){return u},Sw:function(){return c},wr:function(){return s}});var o=n(7059),r=n(8197);const s=e=>{const t=o.A.getters["auth/isLoggedIn"],n=e.matched.some((e=>e["meta"]["requireAuth"]));return n&&!t},a=e=>{const t=e["children"].map((e=>a(e)));return{path:e["path"],name:e["name"],component:u(e["component"]),children:t,meta:{title:e["title"],icon:e["icon"],is_menu:e["is_menu"]}}},i=e=>{const t=r.A.getRoutes();return t.some((t=>t["name"]===e))},c=()=>{const e=o.A.state.menu.menus;for(const t of e){const{name:e}=t;i(e)||r.A.addRoute(a(t))}},u=e=>()=>n(4235)(`./${e}.vue`)},7059:function(e,t,n){"use strict";n.d(t,{A:function(){return h}});var o=n(5471),r=n(5353),s=(n(4114),n(1099)),a=n(8465),i=n.n(a),c=n(8197),u=(n(4603),n(7566),n(8721),n(4279));const l=e=>({name:e["name"],path:e["path"],component:e["component"],title:e["meta"]["title"],icon:e["meta"]["icon"],is_menu:e["meta"]["is_menu"]}),d=c.A.options.routes,m=d.filter((e=>e["meta"]["is_menu"])).map((e=>l(e)));var f={namespaced:!0,state:{menus:m},getters:{},mutations:{async setMenus(e,t){e.menus=[...m,...t],await(0,c.d)(),await(0,u.Sw)()},clearMenus(e,t){e.menus=m,(0,c.d)()}},actions:{async getMenus({state:e,commit:t,dispatch:n},o){try{const e=new URLSearchParams({is_children:!1}),n=await s.$1.getAll(e);if(200===n.status){const e=n.data;t("setMenus",e),(0,u.Sw)()}}catch(r){console.log(r)}}}},p={namespaced:!0,modules:{menu:f},state:{accessToken:localStorage.getItem("accessToken")||null,refreshToken:localStorage.getItem("refreshToken")||null},getters:{isLoggedIn:e=>!!e.accessToken},mutations:{setAccessToken(e,t){e.accessToken=t,localStorage.setItem("accessToken",t)},setRefreshToken(e,t){e.refreshToken=t,localStorage.setItem("refreshToken",t)},clearToken(e){e.accessToken=null,e.refreshToken=null,localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},actions:{async refreshToken({state:e,commit:t},n){try{const n=await s.sO.refresh_token(e.refreshToken);if(200===n.status){const e=n.data["access"];t("setAccessToken",e)}}catch(o){const e=await i().fire({title:"權限過期",icon:"error",confirmButtonText:"重新登入",allowOutsideClick:!1,allowEscapeKey:!1});e.isConfirmed&&(t("clearToken"),c.A.push({name:"Login"}))}},async verifyAccessToken({state:e,dispatch:t},n){try{const t=await s.sO.verify_token(e.accessToken);t.status}catch(o){await t("refreshToken"),console.log(o)}},async login({commit:e,dispatch:t},n){try{const o=await s.sO.login(n);if(200===o.status){i().fire("登入成功","","success");const{data:{access:n,refresh:r}}=o;e("setAccessToken",n),e("setRefreshToken",r),await t("menu/getMenus"),c.A.push({name:"Home"})}else i().fire("登入失敗","發生非200狀態碼","error")}catch(o){i().fire("登入失敗",o,"error")}},async logout({commit:e},t){const n=await i().fire({title:"登出提醒",text:"你確定要登出系統了嗎?",icon:"warning",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"登出",allowOutsideClick:!1,allowEscapeKey:!1});n.isConfirmed&&(await e("clearToken"),await e("menu/clearMenus"),c.A.push({name:"Login"}),i().fire("登出成功","","success"))}}};o.Ay.use(r.Ay);var h=new r.Ay.Store({modules:{auth:p,menu:f},state:{},getters:{},mutations:{},actions:{}})},4235:function(e,t,n){var o={"./Auth/Login.vue":[799,180],"./Dashboard.vue":[8377,377],"./Home.vue":[8379,379],"./PageNotFound.vue":[8597,597],"./Parent/Children/Children1.vue":[7567,567],"./Parent/Children/Children2.vue":[7775,775],"./Parent/Children/Children3.vue":[6331,331],"./Parent/Children/SubChildren1.vue":[8770,770],"./Parent/ParentView.vue":[7948,948],"./WebSocket.vue":[1328,328]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(o)},r.id=4235,e.exports=r},3914:function(e,t,n){"use strict";e.exports=n.p+"img/logo.4d6033c9.svg"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,s){if(!o){var a=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],s=e[l][2];for(var i=!0,c=0;c<o.length;c++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(i=!1,s<a&&(a=s));if(i){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[o,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{180:"8b1fd851",328:"079e188b",331:"a3c45741",377:"9150c881",379:"b27c3fa9",567:"895abeca",597:"35f94ef8",770:"8cb0cba7",775:"b495fbec",948:"210594a2"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{180:"a368438c",331:"5f4fd151",377:"5f4fd151",379:"5f4fd151",567:"5f4fd151",597:"88425032",770:"5f4fd151",775:"5f4fd151",948:"5f4fd151"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="deploy_vue_project:";n.l=function(o,r,s,a){if(e[o])e[o].push(r);else{var i,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+s){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+s),i.src=o),e[o]=[r];var m=function(t,n){i.onerror=i.onload=null,clearTimeout(f);var r=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/deploy_vue_project/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,r,s){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",n.nc&&(a.nonce=n.nc);var i=function(n){if(a.onerror=a.onload=null,"load"===n.type)r();else{var o=n&&n.type,i=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+i+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=i,a.parentNode&&a.parentNode.removeChild(a),s(c)}};return a.onerror=a.onload=i,a.href=t,o?o.parentNode.insertBefore(a,o.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===e||s===t))return r}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){r=a[o],s=r.getAttribute("data-href");if(s===e||s===t)return r}},o=function(o){return new Promise((function(r,s){var a=n.miniCssF(o),i=n.p+a;if(t(a,i))return r();e(o,i,null,r,s)}))},r={524:0};n.f.miniCss=function(e,t){var n={180:1,331:1,377:1,379:1,567:1,597:1,770:1,775:1,948:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=o(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};n.f.j=function(t,o){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var s=new Promise((function(n,o){r=e[t]=[n,o]}));o.push(r[2]=s);var a=n.p+n.u(t),i=new Error,c=function(o){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var s=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",i.name="ChunkLoadError",i.type=s,i.request=a,r[1](i)}};n.l(a,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,s,a=o[0],i=o[1],c=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(c)var l=c(n)}for(t&&t(o);u<a.length;u++)s=a[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},o=self["webpackChunkdeploy_vue_project"]=self["webpackChunkdeploy_vue_project"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(4232)}));o=n.O(o)})();
//# sourceMappingURL=app.247a7877.js.map